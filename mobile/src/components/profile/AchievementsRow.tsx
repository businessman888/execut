import React from 'react';
import { Box, HStack, VStack, Text, Pressable } from '../ui';
import Svg, { Path } from 'react-native-svg';

interface Achievement {
    id: string;
    title: string;
    icon: 'rocket' | 'coin' | 'lightning';
    isUnlocked: boolean;
}

interface AchievementsRowProps {
    achievements: Achievement[];
    onViewAll?: () => void;
}

// Rocket icon (from icon rockett.svg)
const RocketIcon = ({ size = 35, color = '#33CFFF' }: { size?: number; color?: string }) => (
    <Svg width={size} height={size} viewBox="0 0 35 35" fill="none">
        <Path
            d="M22.48 10.718C22.0579 10.7183 21.6489 10.8648 21.3228 11.1328C20.9967 11.4007 20.7735 11.7735 20.6914 12.1875C20.6092 12.6015 20.6732 13.0312 20.8724 13.4034C21.0715 13.7755 21.3935 14.0671 21.7836 14.2285C22.1736 14.3898 22.6076 14.411 23.0114 14.2882C23.4153 14.1655 23.7641 13.9066 23.9985 13.5555C24.2328 13.2045 24.3382 12.783 24.2967 12.363C24.2551 11.9429 24.0692 11.5503 23.7706 11.2519C23.6013 11.0822 23.4001 10.9477 23.1786 10.8561C22.9571 10.7645 22.7197 10.7176 22.48 10.718Z"
            fill={color}
        />
        <Path
            d="M32.6376 3.42204C32.6373 3.42 32.6373 3.41792 32.6376 3.41589C32.5798 3.16249 32.4523 2.93029 32.2696 2.74548C32.0868 2.56068 31.856 2.43062 31.6033 2.36999C29.5662 1.87301 26.3615 2.4028 22.8102 3.82467C19.2309 5.26022 15.8772 7.37936 13.6104 9.65026C12.8839 10.373 12.2089 11.1458 11.5904 11.9629C10.0639 11.8945 8.71932 12.1119 7.5866 12.6061C3.63953 14.3431 2.51228 18.7885 2.21219 20.6137C2.16876 20.8731 2.18577 21.1389 2.26187 21.3906C2.33798 21.6423 2.47114 21.8731 2.65099 22.0649C2.83084 22.2567 3.05253 22.4044 3.2988 22.4966C3.54507 22.5887 3.80928 22.6228 4.07088 22.5962H4.07977L8.47664 22.1163C8.48211 22.1723 8.48826 22.2236 8.49305 22.2708C8.54952 22.8065 8.78846 23.3066 9.1698 23.6872L11.3156 25.8343C11.6956 26.2162 12.1956 26.4555 12.7313 26.5118L12.8783 26.5275L12.3998 30.9189V30.9278C12.3753 31.1643 12.4005 31.4033 12.4737 31.6295C12.5469 31.8558 12.6664 32.0642 12.8248 32.2416C12.9831 32.419 13.1767 32.5614 13.3932 32.6597C13.6097 32.758 13.8444 32.81 14.0821 32.8125C14.1772 32.8126 14.272 32.8048 14.3658 32.7892C16.2012 32.4939 20.6446 31.3803 22.3768 27.4121C22.867 26.2869 23.0837 24.9477 23.0228 23.424C23.8436 22.8069 24.6192 22.1318 25.3436 21.404C27.6289 19.1303 29.7549 15.804 31.1754 12.2766C32.5897 8.76569 33.1222 5.53708 32.6376 3.42204ZM25.319 15.3767C24.7573 15.939 24.0415 16.322 23.2621 16.4774C22.4826 16.6328 21.6746 16.5534 20.9403 16.2495C20.206 15.9455 19.5783 15.4306 19.1366 14.7698C18.695 14.1091 18.4593 13.3322 18.4593 12.5374C18.4593 11.7427 18.695 10.9658 19.1366 10.305C19.5783 9.64423 20.206 9.1293 20.9403 8.82535C21.6746 8.5214 22.4826 8.44208 23.2621 8.59744C24.0415 8.75279 24.7573 9.13584 25.319 9.69811C25.6955 10.0689 25.9945 10.5109 26.1985 10.9984C26.4026 11.4858 26.5077 12.009 26.5077 12.5374C26.5077 13.0659 26.4026 13.589 26.1985 14.0765C25.9945 14.5639 25.6955 15.0059 25.319 15.3767Z"
            fill={color}
        />
        <Path
            d="M11.0695 26.4168C10.805 26.384 10.5376 26.4489 10.3176 26.5993C9.88078 26.898 9.44191 27.1933 8.99894 27.4811C8.10275 28.0636 7.03088 27.0409 7.5634 26.114L8.39396 24.6784C8.51271 24.5047 8.57883 24.3004 8.58439 24.0901C8.58996 23.8798 8.53474 23.6723 8.42535 23.4925C8.31596 23.3128 8.15705 23.1684 7.96767 23.0767C7.77829 22.985 7.56647 22.9499 7.35763 22.9756C6.43581 23.0921 5.57895 23.512 4.92199 24.1691C4.67179 24.42 3.91095 25.1815 3.50148 28.0834C3.38494 28.9169 3.31147 29.7559 3.28137 30.597C3.27762 30.7429 3.30315 30.8882 3.35644 31.0241C3.40973 31.1601 3.4897 31.284 3.59164 31.3885C3.69358 31.4931 3.81542 31.5762 3.94998 31.6329C4.08454 31.6896 4.22909 31.7188 4.37512 31.7187H4.40246C5.24419 31.6889 6.08384 31.6159 6.91808 31.5C9.82131 31.0898 10.5828 30.3283 10.833 30.0781C11.4931 29.4208 11.912 28.56 12.0218 27.6349C12.0569 27.3472 11.9764 27.0572 11.7978 26.8288C11.6193 26.6003 11.3573 26.4522 11.0695 26.4168Z"
            fill={color}
        />
    </Svg>
);

// Coin icon (from icon coinn.svg) 
const CoinIcon = ({ size = 35, color = '#33CFFF' }: { size?: number; color?: string }) => (
    <Svg width={size} height={size} viewBox="0 0 35 35" fill="none">
        <Path
            d="M16.0417 22.3971H15.9674C15.6004 22.3967 15.2487 22.2507 14.9892 21.9913C14.7297 21.7318 14.5838 21.38 14.5834 21.0131C14.5834 20.6263 14.4298 20.2554 14.1563 19.9819C13.8828 19.7084 13.5119 19.5548 13.1251 19.5548C12.7383 19.5548 12.3674 19.7084 12.0939 19.9819C11.8204 20.2554 11.6667 20.6263 11.6667 21.0131C11.6671 22.1536 12.1204 23.2472 12.9268 24.0537C13.7332 24.8601 14.8269 25.3133 15.9674 25.3137H16.0417V26.7721C16.0417 27.1588 16.1954 27.5298 16.4689 27.8033C16.7424 28.0767 17.1133 28.2304 17.5001 28.2304C17.8869 28.2304 18.2578 28.0767 18.5313 27.8033C18.8048 27.5298 18.9584 27.1588 18.9584 26.7721V25.3137C20.1187 25.3137 21.2315 24.8528 22.052 24.0323C22.8725 23.2118 23.3334 22.099 23.3334 20.9387C23.3334 19.7784 22.8725 18.6656 22.052 17.8451C21.2315 17.0247 20.1187 16.5637 18.9584 16.5637V13.6471H18.9905C19.778 13.6471 20.4167 14.2858 20.4167 15.0733C20.4167 15.4601 20.5704 15.831 20.8439 16.1045C21.1174 16.378 21.4883 16.5316 21.8751 16.5316C22.2619 16.5316 22.6328 16.378 22.9063 16.1045C23.1798 15.831 23.3334 15.4601 23.3334 15.0733C23.3326 13.9217 22.8748 12.8175 22.0606 12.0033C21.2463 11.189 20.1421 10.7312 18.9905 10.7304H18.9584V9.27205C18.9584 8.88528 18.8048 8.51435 18.5313 8.24086C18.2578 7.96737 17.8869 7.81372 17.5001 7.81372C17.1133 7.81372 16.7424 7.96737 16.4689 8.24086C16.1954 8.51435 16.0417 8.88528 16.0417 9.27205V10.7304C15.4672 10.7304 14.8983 10.8436 14.3675 11.0634C13.8367 11.2833 13.3544 11.6055 12.9482 12.0118C12.5419 12.4181 12.2196 12.9003 11.9998 13.4311C11.7799 13.9619 11.6667 14.5309 11.6667 15.1054C11.6667 15.6799 11.7799 16.2488 11.9998 16.7796C12.2196 17.3104 12.5419 17.7927 12.9482 18.199C13.3544 18.6052 13.8367 18.9275 14.3675 19.1474C14.8983 19.3672 15.4672 19.4804 16.0417 19.4804V22.3971ZM18.9584 22.3971V19.4804C19.3452 19.4804 19.7161 19.634 19.9896 19.9075C20.2631 20.181 20.4167 20.5519 20.4167 20.9387C20.4167 21.3255 20.2631 21.6964 19.9896 21.9699C19.7161 22.2434 19.3452 22.3971 18.9584 22.3971ZM16.0417 13.6471V16.5637C15.655 16.5637 15.284 16.4101 15.0106 16.1366C14.7371 15.8631 14.5834 15.4922 14.5834 15.1054C14.5834 14.7186 14.7371 14.3477 15.0106 14.0742C15.284 13.8007 15.655 13.6471 16.0417 13.6471ZM17.5001 32.6054C9.44571 32.6054 2.91675 26.0764 2.91675 18.0221C2.91675 9.96768 9.44571 3.43872 17.5001 3.43872C25.5545 3.43872 32.0834 9.96768 32.0834 18.0221C32.0834 26.0764 25.5545 32.6054 17.5001 32.6054Z"
            fill={color}
        />
    </Svg>
);

// Lightning/Flash icon (from icon flashh.svg)
const LightningIcon = ({ size = 35, color = '#33CFFF' }: { size?: number; color?: string }) => (
    <Svg width={size} height={size} viewBox="0 0 35 35" fill="none">
        <Path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M19.2966 1.98335C20.2183 0.877932 22.0135 1.63335 21.8677 3.06543L20.8381 13.125H29.1666C29.4437 13.1251 29.7151 13.2042 29.9489 13.3529C30.1827 13.5017 30.3692 13.7139 30.4868 13.9649C30.6043 14.2158 30.6479 14.4951 30.6124 14.7699C30.577 15.0447 30.464 15.3038 30.2866 15.5167L15.7033 33.0167C14.7816 34.1221 12.9864 33.3667 13.1322 31.9346L14.1618 21.875H5.83328C5.55617 21.8749 5.28483 21.7959 5.05103 21.6471C4.81723 21.4984 4.63065 21.2861 4.51313 21.0352C4.39561 20.7842 4.35202 20.505 4.38747 20.2301C4.42292 19.9553 4.53593 19.6963 4.71328 19.4833L19.2966 1.98335Z"
            fill={color}
        />
    </Svg>
);

const IconMap = {
    rocket: RocketIcon,
    coin: CoinIcon,
    lightning: LightningIcon,
};

export const AchievementsRow: React.FC<AchievementsRowProps> = ({
    achievements,
    onViewAll,
}) => {
    return (
        <VStack space={3}>
            <HStack justifyContent="space-between" alignItems="center">
                <Text color="#FFFFFF" fontSize={16} fontWeight="semibold">
                    Conquistas
                </Text>
                <Pressable onPress={onViewAll}>
                    <Text color="#33CFFF" fontSize={14}>
                        Ver tudo
                    </Text>
                </Pressable>
            </HStack>

            <HStack space={3} justifyContent="center">
                {achievements.map((achievement) => {
                    const IconComponent = IconMap[achievement.icon];

                    return (
                        <Box
                            key={achievement.id}
                            flex={1}
                            bg="surface.primary"
                            borderRadius={16}
                            borderWidth={1}
                            borderColor="rgba(51, 207, 255, 0.3)"
                            p={4}
                            alignItems="center"
                            opacity={achievement.isUnlocked ? 1 : 0.5}
                        >
                            <IconComponent
                                size={35}
                                color={achievement.isUnlocked ? '#33CFFF' : '#6B7280'}
                            />
                            <Text
                                color={achievement.isUnlocked ? '#FFFFFF' : '#6B7280'}
                                fontSize={12}
                                mt={2}
                            >
                                {achievement.title}
                            </Text>
                        </Box>
                    );
                })}
            </HStack>
        </VStack>
    );
};
